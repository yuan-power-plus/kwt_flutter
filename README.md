# ç§‘æ–‡é€š KWT Flutter

ä¸€ä¸ªç”¨äºæŸ¥è¯¢ç§‘æ–‡é€šæ•™åŠ¡ç³»ç»Ÿä¿¡æ¯çš„ Flutter åº”ç”¨ï¼Œæ”¯æŒæŸ¥çœ‹è¯¾è¡¨ã€æˆç»©ã€ç­‰çº§è€ƒè¯•ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›ç°ä»£åŒ–çš„ Material 3 ä½“éªŒï¼Œå¹¶é€‚é…å¤šå¹³å°ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ä¸ªäººè¯¾è¡¨æŸ¥è¯¢**: æŸ¥çœ‹ä¸ªäººè¯¾ç¨‹å®‰æ’ä¸è¯¦æƒ…
- **ç­çº§è¯¾è¡¨æŸ¥è¯¢**: è¾“å…¥ç­çº§ä¿¡æ¯æŸ¥è¯¢å¯¹åº”è¯¾è¡¨
- **æˆç»©æŸ¥è¯¢**: æŸ¥çœ‹è¯¾ç¨‹æˆç»©ã€å­¦åˆ†ä¸ GPA
- **ç­‰çº§è€ƒè¯•æŸ¥è¯¢**: å››å…­çº§ç­‰ç­‰çº§è€ƒè¯•æˆç»©
- **ç”¨æˆ·ç™»å½•**: æ”¯æŒå­¦å·å¯†ç ç™»å½•ï¼Œè‡ªåŠ¨ç®¡ç† Cookie
- **æ£€æŸ¥æ›´æ–°**: åŸºäº GitHub Releases çš„ç‰ˆæœ¬æ£€æŸ¥
- **å“åº”å¼ä¸æ·±è‰²æ¨¡å¼**: å¤šç«¯é€‚é…ï¼ŒMaterial Design 3 é£æ ¼

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- Flutter 3 â€¢ Dart 3
- ç½‘ç»œ: Dioã€Cookie ç®¡ç†ã€HTML è§£æ
- å­˜å‚¨: SharedPreferences
- UI: Material 3ã€Cupertino Icons

## âœ… è¿è¡Œç¯å¢ƒ

- Flutter SDK: ^3.8.1
- Dart SDK: ^3.8.1
- Android: API 21+ (Android 5.0+)
- iOS: 12.0+
- å¯é€‰: Windows / macOS / Linux / Web

## ğŸš€ å¿«é€Ÿå¼€å§‹

1) å…‹éš†å¹¶å®‰è£…ä¾èµ–

```bash
git clone https://github.com/yuan-power-plus/kwt_flutter
cd kwt_flutter
flutter pub get
```

2) å¼€å‘è¿è¡Œ

```bash
flutter run
```

åº”ç”¨é»˜è®¤ä¼šåœ¨ã€Œè¯¾è¡¨ã€é¡µé¢å¯åŠ¨ï¼Œä½ å¯ä»¥åœ¨ã€Œæˆ‘çš„/åŠŸèƒ½ã€é¡µç™»å½•åä½¿ç”¨æ›´å¤šæŸ¥è¯¢èƒ½åŠ›ã€‚

## ğŸ“š ä½¿ç”¨æ•™ç¨‹

- **å¯åŠ¨åº”ç”¨**: é¦–æ¬¡è¿›å…¥é»˜è®¤å±•ç¤ºä¸ªäººè¯¾è¡¨ï¼ˆæœªç™»å½•æ—¶å±•ç¤ºç©ºæ€æˆ–å¼•å¯¼ç™»å½•ï¼‰
- **ç™»å½•**: åœ¨ã€Œæˆ‘çš„ã€æˆ–ã€ŒåŠŸèƒ½ã€é¡µé¢ä½¿ç”¨å­¦å·ä¸å¯†ç ç™»å½•ï¼›æˆåŠŸåè‡ªåŠ¨ç»´æŠ¤ä¼šè¯
- **ä¸ªäººè¯¾è¡¨**: é¦–é¡µæŸ¥çœ‹ï¼›å¯åˆ‡æ¢å‘¨æ¬¡/æ—¶é—´æ¨¡å¼
- **ç­çº§è¯¾è¡¨**: è¿›å…¥ã€Œç­çº§è¯¾è¡¨ã€é¡µé¢ï¼Œè¾“å…¥ç­çº§å…³é”®å­—åæŸ¥è¯¢
- **æˆç»©/ç­‰çº§è€ƒè¯•**: å¯¹åº”é¡µé¢ç‚¹å‡»æŸ¥è¯¢ï¼Œæ”¯æŒæŒ‰å­¦å¹´/å­¦æœŸç­›é€‰ï¼ˆè‹¥æœ‰ï¼‰
- **æ›´æ–°æ£€æŸ¥**: åœ¨è®¾ç½®æˆ–å…³äºé¡µé¢è§¦å‘æ£€æŸ¥ï¼ˆGitHub Releases: `yuan-power-plus/kwt_flutter`ï¼‰

## ğŸ“¦ æ„å»ºå‘å¸ƒ

### Androidï¼ˆå«ç­¾åï¼‰

æœ¬é¡¹ç›®ä½¿ç”¨ Kotlin DSLï¼ˆ`build.gradle.kts`ï¼‰å¹¶ä»é¡¹ç›®æ ¹è¯»å– `key.properties` å®Œæˆç­¾åï¼š

```kotlin
// android/app/build.gradle.ktsï¼ˆèŠ‚é€‰ï¼‰
val keystoreProperties = Properties()
run {
    val f = rootProject.file("key.properties")
    if (f.exists()) {
        f.inputStream().use { keystoreProperties.load(it) }
    }
}
```

1) ç”Ÿæˆç­¾åè¯ä¹¦ï¼ˆkeystoreï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æˆ–ä»»æ„ç›®å½•æ‰§è¡Œï¼Œå»ºè®®ä¿å­˜åˆ° android/ ç›®å½•ä¸‹
keytool -genkeypair -v -keystore kwt.jks -alias kwt -keyalg RSA -keysize 2048 -validity 36500 -storetype JKS
```

2) åˆ›å»º `key.properties`ï¼ˆandroidç›®å½•ä¸‹ï¼‰

```properties
# key.propertiesï¼ˆä½äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
storeFile=kwt.jks
storePassword=ä½ çš„Keystoreå¯†ç 
keyAlias=kwt
keyPassword=ä½ çš„Keyå¯†ç 
```

3) æ„å»ºå‘å¸ƒåŒ…

```bash
# APKï¼ˆæ¨èç”¨äºç›´è£…åˆ†å‘ï¼‰
flutter build apk --release

# App Bundleï¼ˆæ¨èä¸Šæ¶åº”ç”¨å•†åº—ï¼‰
flutter build appbundle --release
```

æ„å»ºæˆåŠŸåäº§ç‰©ä½äºï¼š
- APK: `build/app/outputs/flutter-apk/app-release.apk`
- AAB: `build/app/outputs/bundle/release/app-release.aab`

æ³¨æ„ï¼šå¦‚æœæœªæä¾› `key.properties`ï¼Œrelease æ„å»ºä¼šä½¿ç”¨æœªç­¾åé…ç½®æˆ–å¤±è´¥ï¼Œè¯·ç¡®ä¿æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„/å¯†ç æ­£ç¡®ã€‚

### iOSï¼ˆç­¾åä¸å‘å¸ƒï¼‰

1) æ‰“å¼€ iOS å·¥ç¨‹

```bash
open ios/Runner.xcworkspace
```

2) åœ¨ Xcode ä¸­ï¼š
- é€‰æ‹© Teamï¼Œè®¾ç½® Bundle Identifier
- è®¾ç½® Signing & Capabilitiesï¼ˆå¼€å‘/å‘å¸ƒè¯ä¹¦ã€Provisioning Profileï¼‰
- Product > Archive è¿›è¡Œæ‰“åŒ…å¹¶é€šè¿‡ Organizer åˆ†å‘

3) Flutter å‘½ä»¤è¡Œæ„å»ºï¼ˆéœ€è¦å·²é…ç½®ç­¾åï¼‰ï¼š

```bash
flutter build ios --release
```

### å…¶ä»–å¹³å°

- Web: `flutter build web`
- Windows: `flutter build windows`
- macOS: `flutter build macos`
- Linux: `flutter build linux`

## ğŸ“ é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ assets/           # é™æ€èµ„æº
â”œâ”€â”€ common/           # é€šç”¨ç»„ä»¶
â”œâ”€â”€ constants/        # å¸¸é‡å®šä¹‰
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”œâ”€â”€ services/         # Dio å®¢æˆ·ç«¯ã€é…ç½®ã€è®¾ç½®ä¸æ›´æ–°æœåŠ¡
â”œâ”€â”€ theme/            # ä¸»é¢˜é…ç½®ï¼ˆMaterial 3ï¼‰
â”œâ”€â”€ utils/            # å·¥å…·ç±»
â””â”€â”€ main.dart         # åº”ç”¨å…¥å£
```

## ğŸ”§ é…ç½®ä¸å®šåˆ¶

- `lib/services/config.dart`
  - `intranetServerUrl` / `internetServerUrl`: æ ¡å†…/å¤–è®¿é—®å…¥å£
  - `appName` / `appVersion`: åº”ç”¨ä¿¡æ¯
  - `githubOwner` / `githubRepo`: ç”¨äºæ£€æŸ¥æ›´æ–°çš„ä»“åº“
  - `connectionTimeout` / `receiveTimeout`: ç½‘ç»œè¶…æ—¶

- App å›¾æ ‡ï¼šå·²é›†æˆ `flutter_launcher_icons`ï¼Œå¯ä¿®æ”¹ `pubspec.yaml` ä¸­çš„ç›¸å…³é…ç½®åæ‰§è¡Œï¼š

```bash
flutter pub run flutter_launcher_icons:main
```

## ğŸ“œ è®¸å¯è¯ä¸å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä¸ç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚ä½¿ç”¨æœ¬åº”ç”¨æ—¶è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ä¸å­¦æ ¡è§„å®šã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue ä¸ Pull Requestï¼Œå…±åŒå®Œå–„é¡¹ç›®ï¼
